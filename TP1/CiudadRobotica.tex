\documentclass[10pt, a4paper]{article}
\usepackage[paper=a4paper, left=1.5cm, right=1.5cm, bottom=1.5cm, top=3.5cm]{geometry}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\usepackage{indentfirst}
\usepackage{fancyhdr}
\usepackage{latexsym}
\usepackage{lastpage}
\usepackage{aed2-symb,aed2-itef,aed2-tad}
\usepackage[colorlinks=true, linkcolor=blue]{hyperref}
\usepackage{calc}
%TODO: alinear, y los TAD renombre: estacion, caracteristica. TADs CiudadRobotica, Senda. Igualdad Observacional de todos los tads

\begin{document}

\begin{tad}{\tadNombre{CiudadRobotica}}
\tadGeneros{CiudadRobotica}
\tadExporta{CiudadRobotica, Generadores, Observadores, Otras Operaciones}
\tadUsa{Nat, Bool, ...}
\tadIgualdadObservacional{}{}{}{}
\tadObservadores
\tadOperacion{robotsC}{CiudadRobotica}{conj(Robot)}{}
\tadOperacion{sendasC}{CiudadRobotica}{conj(Sendas)}{}
\tadOperacion{ubicacionR}{Robot/r, CiudadRobotica/cr}{estacion}{r $\in$ robotsC(cr)}
\tadOperacion{infraccionesR}{CiudadRobotica, Robot}{Nat}{r $\in$ robotsC(cr)}
\tadGeneradores
\tadOperacion{NuevaCiudad}{conj(Sendas)/cs}{CiudadRobotica}{$\neg$ (cs \igobs $\emptyset$)}
\tadOperacion{AgRobot}{Robot/r1, Estacion/e, CiudadRobotica/cr}{CiudadRobotica}{($\not\exists$ r2: Robot) (r2 $\in$ robotsC(cr)) $\implies$ RUR(r1)\igobs RUR(r2)}
\tadOperacion{MoverRobot}{Robot/r, Estacion/e, CiudadRobotica/cr}{CiudadRobotica}{($\exists$ s: Senda) s $\in$ sendasC(cr) $\impluego$ s \igobs conectadasPor(e, ubicacionR(r,cr), cr)}
\tadOperacion{}{}{}{}
\tadOtrasOperaciones
\tadOperacion{estacionesC}{conj(Sendas)}{conj(estacion)}{}
\tadOperacion{conectadasPor}{Estacion/e1, Estacion/e2, CiudadRobotica/cr}{Senda}{($\exists$ s : Senda) s $\in$ sendasC(cr) $\impluego$ (e1 \igobs estacion1(s) $\land$ e2 \igobs estacion2(s))$\lor$(e2 \igobs estacion1(s) $\land$ e1 \igobs estacion2(s))}
\tadOperacion{conectadasPorAux}{Estacion/e1, Estacion/e2, conj(Senda)/cs}{Senda}{$\neg$(cs \igobs $\emptyset$ )}
\tadOperacion{inspeccionLunes}{CiudadRobotica, Estacion}{CiudadRobotica}{}
\tadAxiomas
\tadAxioma{robotsC(NuevaCiudad(cs))}{$\emptyset$}
\tadAxioma{robotsC(AgRobot(r, e, cr))}{Ag(e,robotsC(cr))}
\tadAxioma{robotsC(MoverRobot(r, e, cr))}{robotsC(cr)}
\tadAxioma{sendasC(NuevaCiudad(cs))}{cs}
\tadAxioma{sendasC(AgRobot(r, e, cr)}{sendasC(cr)}
\tadAxioma{sendasC(MoverRobot(r, e, cr))}{sendasC(cr)}
\tadAxioma{ubicacionR(r1, AgRobot(r2, e, cr))}{\LIF{ r1 \igobs r2} \LTHEN{ e} \LELSE{ ubicacionR(r1, cr) }\LFI}
\tadAxioma{ubicacionR(r1, MoverRobot(r2, e, cr))}{\LIF{ r1 \igobs r2 }\LTHEN{ e }\LELSE{ ubicacionR(r1, cr) }\LFI}
\tadAxioma{infraccionesR(NuevaCiudad(cs), r)}{0}
\tadAxioma{infraccionesR(AgRobot(r1, e, cr), r2)}{infraccionesR(cr)}
\tadAxioma{infraccionesR(MoverRobot(r1, e, cr), r2)}{\LIF{ r1 \igobs r2 }\\
\LTHEN{ \LIF { $\neg$Permitido?(conectadasPor(e,ubicacionR(r2,cr),cr),r2)}\\
\LTHEN{ 1 + infraccionesR(cr, r2) }\\
\LELSE{ infraccionesR(cr, r2) } }\\
\LELSE{ infraccionesR(cr, r2) } }
\tadAxioma{estacionesC(cs)}{\LIF{ cs \igobs $\emptyset$ } \LTHEN{ $\emptyset$ }\\
\LELSE{ Ag(estacion1(dameUno(cs)), Ag(estacion2(dameUno(cs)), estacionesC(sinUno(cs)))) }}
\tadAxioma{conectadasPor(e1, e2, cr)}{conectadasPorAux(e1, e2, sendasC(cr))}
\tadAxioma{conectadasPorAux(e1, e2, cs)}{\LIF{ (e1 \igobs estacion1(dameUno(cs)) $\land$ e2 \igobs estacion2(dameUno(cs)))\\
$\lor$ (e2 \igobs estacion1(dameUno(cs)) $\land$ e1 \igobs estacion2(dameUno(cs)))}\\
\LTHEN{ dameUno(cs)} \\
\LELSE{ conectadasPorAux(e1, e2, sinUno(cs))} }
\tadAxioma{}{}
\tadAxioma{}{}
\tadAxioma{}{}
\end{tad}
\newpage


\begin{tad}{\tadNombre{Robot}}
\tadGeneros{Robot}
\tadExporta{Robot, Generadores, Observadores, Otras Operaciones}
\tadUsa{Nat, Bool, Caracteristica, Conj($\alpha$)}
\tadIgualdadObservacional{r1}{r2}{Robot}{RUR(r1)\igobs RUR(r2) $\land$\\ CaracteristicasR(r1) \igobs CaracteristicasR(r2)}
\tadObservadores
\tadOperacion{RUR}{Robot}{Nat}{}
\tadOperacion{CaracteristicasR}{Robot}{Conj(Caracteristica)}{}
\tadGeneradores
\tadOperacion{NuevoRobot}{Nat}{Robot}{}
\tadOperacion{AgCaracteristica}{Robot, Caracteristica}{Robot}{}
\tadOtrasOperaciones
\tadOperacion{TieneCaracteristica?}{Robot, Caracteristica}{Bool}{}
\tadAxiomas[\paratodo{Robot}{r}]
\tadAxioma{RUR(NuevoRobot(n))}{n}
\tadAxioma{RUR(AgCaracteristica(r, c))}{RUR(r)}
\tadAxioma{CaracteristicasR(NuevoRobot(n))}{$\emptyset$}
\tadAxioma{CaracteristicasR(AgCaracteristica(r, c))}{Ag(c, CaracteristicasR(r))}
\tadAxioma{TieneCaracteristica?(r, c)}{c $\in$ CaracteristicasR(r)}


\end{tad}

\begin{tad}{\tadNombre{Senda}}
\tadGeneros{Senda}
\tadExporta{Senda, Generadores, Observadores, Otras Operaciones}
\tadUsa{Bool, Robot, Restriccion, Estacion}
\tadIgualdadObservacional{}{}{}{}
\tadObservadores
\tadOperacion{estacion1}{Senda}{Estacion}{}
\tadOperacion{estacion2}{Senda}{Estacion}{}
\tadOperacion{RestriccionS}{Senda}{Restriccion}{}
\tadGeneradores
\tadOperacion{SendaNueva}{Estacion/e1, Estacion/e2, Restriccion}{Senda}{$\neg$(e1 \igobs e2)}
\tadOtrasOperaciones
\tadOperacion{Permitido?}{Senda, Robot}{Bool}{}
\tadAxiomas[\paratodo{Robot}{r}, \paratodo{Senda}{s}, \paratodo{Estacion}{e1, e2}]
\tadAxioma{estacion1(SendaNueva(e1, e2, r))}{e1}
\tadAxioma{estacion2(SendaNueva(e1, e2, r))}{e2}
\tadAxioma{RestriccionS(SendaNueva(e1, e2, r))}{r}
\tadAxioma{Permitido?(s, r)}{CumpleCondicion?(RestriccionS(s), r)}
\end{tad}

\begin{tad}{\tadNombre{Restriccion}}
\tadGeneros{Restriccion}
\tadExporta{Generadores, Observadores}
\tadUsa{Bool, Robot}
\tadIgualdadObservacional{}{}{}{}
\tadObservadores
\tadOperacion{CumpleCondicion?}{Restriccion, robot}{bool}{}
\tadGeneradores
\tadOperacion{Caract}{Caracteristica}{Restriccion}{}
\tadOperacion{\argumento OR \argumento}{Restriccion,Restriccion}{Restriccion}{}
\tadOperacion{\argumento AND \argumento}{Restriccion,Restriccion}{Restriccion}{}
\tadOperacion{NOT \argumento}{Restriccion}{Restriccion}{}
\tadAxiomas[\paratodo{Restriccion}{a,b}, \paratodo{Caracteristica}{s}]
\tadAxioma{CumpleCondicion?(Caract(s), r)}{TieneCaracteristica?(s, r)}
\tadAxioma{CumpleCondicion?(a OR b, r)}{CumpleCondicion?(a, r) $\lor$ CumpleCondicion?(b, r)}
\tadAxioma{CumpleCondicion?(a AND b, r)}{CumpleCondicion?(a, r) $\land$ CumpleCondicion?(b, r)}
\tadAxioma{CumpleCondicion?(NOT a, r)}{$\neg$ CumpleCondicion?(a, r)}
\end{tad}


\end{document}
